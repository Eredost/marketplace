{% extends 'base.html.twig' %}

{% block title %}My profil {% endblock %}

{% block body %}

{# Condition pour vérifier que le user loggué est bien le titulaire du profil #}
{% if app.user.email == producer.user.email %}


<div class="producer_profil">

{# Détails du profil du Producer loggué #}
<div class="producer-form">
    <h1>Profil User</h1>
    <p>Avatar:{{producer.avatar}}</p>
    <p>Raison social: {{producer.socialReason}}</p>
    <p>Siret: {{producer.siretNumber}}</p>
    <p>Status: {{producer.status}}</p>
    <p>Email : {{producer.email}}</p>
    <p>Crée le : {{producer.createdAt | date('d-m-Y')}}</p>
    <p>Mis à jour le : {{producer.updatedAt | date('d-m-Y')}}</p>
    <p>Prenom : {{producer.firstname}}</p>
    <p>Nom : {{producer.lastname}}</p>
    <p>Adresse : {{producer.address}} - {{producer.postalCode}} - {{producer.city}}</p>
    <p>Telephone : {{producer.telephone}}</p>
        
    <a href="{{path('producer_edit',{'id': producer.id})}}" class="btn btn-success"> 
        Modifier mon Profil
        <i class="fas"></i> 
    </a>

</div>


{# Mise en place de la liste des produits du producer avec accès view/edit/delete#}

<div class="container  producer-form">
        <h1> My Products Index </h1>
    <a href="#" class="btn btn-success"> 
        Ajouter un produit
        <i class="fa fa-plus-circle"></i> 
    </a>

    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>
        {% for product in producer.products %}
            <tr>
            
                 <td>{{ product.name }}</td>
                 <td>
                    <a href="{{ path('product_show', {'id' : product.id})}}" class="btn btn-success">
                        <i class="fa fa-eye" title="Voir la fiche produit"></i>
                    </a>
                    <a href="#" class="btn btn-primary">
                        <i class="fa fa-edit" title="Modifier le produit"></i>
                    </a>
                    {# Mise en place des conditions pour affichage différent si le produit est enable ou disable #}
                    {% if product.enable == true %}
                    <a href="{{ path('disable_product', {'id' : product.id})}}" class="btn btn-success">
                        <i class="fa fa-eye-slash" title="Desactiver le produit"></i>
                    </a>
                    {% else %}
                    <a href="{{ path('disable_product', {'id' : product.id})}}" class="btn btn-warning">
                        <i class="fa fa-eye-slash" title="Activer le produit"></i>
                    </a>
                    {% endif %}  
                    <a href="#" class="btn btn-danger">
                        <i class="fa fa-times" title="Supprimer le produit"></i>
                    </a>
                  </td>
            </tr>
        
        {% else %}
            <tr>
                <td colspan="5">No records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</div>
</div>
{% else %}
<div class="alert alert-danger" role="alert">
        Vous n'êtes pas autorisé à accéder aux informations d'un autre compte
      </div>
{% endif %} 

{% endblock %}
